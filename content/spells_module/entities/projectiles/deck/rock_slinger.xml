<Entity name="rock_formation_caster" tags="projectile,rock_slinger_caster">
  <!-- Keep it stationary & ignore gravity -->
  <Base file="data/entities/base_projectile.xml">
    <VelocityComponent gravity_y="0" />
    <ProjectileComponent
      speed_min="0"
      speed_max="0"
      on_death_explode="0"
      die_on_low_velocity="0"
      lifetime="120" />
  </Base>

  <!-- Formation animation -->
  <SpriteComponent
    image_file="mods/noita.thingsmod/content/spells_module/entities/projectiles/deck/rock_formation.png"
    rect_animation="form"
    offset_x="6"
    offset_y="6"
  >
    <RectAnimation
      name="form"
      pos_x="0" pos_y="0"
      frame_count="8"
      frame_width="12" frame_height="12"
      frames_per_row="8"
      frame_wait="0.05"
      loop="0"
      shrink_by_one_pixel="0" />
  </SpriteComponent>

  <!-- Nice buildup particles (optional) -->
  <ParticleEmitterComponent
    emitted_material_name="spark_white"
    count_min="2" count_max="4"
    emission_interval_min_frames="1"
    emission_interval_max_frames="2"
    lifetime_min="0.3" lifetime_max="0.6"
    x_vel_min="-12" x_vel_max="12"
    y_vel_min="-10" y_vel_max="2"
    gravity.y="30"
    fade_based_on_lifetime="1"
    emit_cosmetic_particles="1"
    create_real_particles="0"
    is_emitting="1" />

  <!-- Logic: wait for animation/delay, then fire real projectile -->
  <LuaComponent
    script_source_file="mods/noita.thingsmod/content/spells_module/scripts/projectiles/rock_slinger.lua"
    execute_every_n_frame="1" />



  <VariableStorageComponent
		name="projectile_file"
		value_string="mods/noita.thingsmod/content/spells_module/entities/projectiles/deck/rock_slinger.xml"
	>
	</VariableStorageComponent>
</Entity>
